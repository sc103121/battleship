<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Command (Battleship.Battleship.Command)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.1.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">Battleship</a> &#x00BB; <a href="../index.html">Battleship</a> &#x00BB; Command</nav><header class="odoc-preamble"><h1>Module <code><span>Battleship.Command</span></code></h1><p>Command enables parsing of player commands.</p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type" id="type-row_or_col" class="anchored"><a href="#type-row_or_col" class="anchor"></a><code><span><span class="keyword">type</span> row_or_col</span><span> = int</span></code></div><div class="spec-doc"><p>The type <code>row_or_col</code> is an integer that represents a row or column number.</p></div></div><div class="odoc-spec"><div class="spec type" id="type-object_phrase" class="anchored"><a href="#type-object_phrase" class="anchor"></a><code><span><span class="keyword">type</span> object_phrase</span><span> = int * int</span></code></div><div class="spec-doc"><p>The type <code>object_phrase</code> represents the object phrase that can be part of a player command. It is a pair of ints (row, column) that specifies a location given the row and column. Thus, no element of the list should contain any leading, internal, or trailing spaces. The list is in the same order as the words in the original player command. For example:</p><ul><li>If the player command is <code>&quot;1 2&quot;</code>, then the object phrase is <code>(1, 2)</code>.</li></ul><ul><li>If the player command is <code>&quot;     3 2&quot;</code>, then the object phrase is again <code>(3, 2)</code>.</li></ul><p>An <code>object_phrase</code> is not permitted to be the empty pair.</p></div></div><div class="odoc-spec"><div class="spec type" id="type-command" class="anchored"><a href="#type-command" class="anchor"></a><code><span><span class="keyword">type</span> command</span><span> = </span></code><table><tr id="type-command.Place_Ship" class="anchored"><td class="def variant constructor"><a href="#type-command.Place_Ship" class="anchor"></a><code><span>| </span><span><span class="constructor">Place_Ship</span> <span class="keyword">of</span> <a href="#type-object_phrase">object_phrase</a> * string * string</span></code></td></tr><tr id="type-command.Bomb" class="anchored"><td class="def variant constructor"><a href="#type-command.Bomb" class="anchor"></a><code><span>| </span><span><span class="constructor">Bomb</span> <span class="keyword">of</span> <a href="#type-object_phrase">object_phrase</a></span></code></td></tr><tr id="type-command.Bomb_col" class="anchored"><td class="def variant constructor"><a href="#type-command.Bomb_col" class="anchor"></a><code><span>| </span><span><span class="constructor">Bomb_col</span> <span class="keyword">of</span> <a href="#type-row_or_col">row_or_col</a></span></code></td></tr><tr id="type-command.Bomb_row" class="anchored"><td class="def variant constructor"><a href="#type-command.Bomb_row" class="anchor"></a><code><span>| </span><span><span class="constructor">Bomb_row</span> <span class="keyword">of</span> <a href="#type-row_or_col">row_or_col</a></span></code></td></tr><tr id="type-command.Bomb_cross" class="anchored"><td class="def variant constructor"><a href="#type-command.Bomb_cross" class="anchor"></a><code><span>| </span><span><span class="constructor">Bomb_cross</span> <span class="keyword">of</span> <a href="#type-object_phrase">object_phrase</a></span></code></td></tr><tr id="type-command.Bomb_square" class="anchored"><td class="def variant constructor"><a href="#type-command.Bomb_square" class="anchor"></a><code><span>| </span><span><span class="constructor">Bomb_square</span> <span class="keyword">of</span> <a href="#type-object_phrase">object_phrase</a></span></code></td></tr><tr id="type-command.Bomb_diagonal" class="anchored"><td class="def variant constructor"><a href="#type-command.Bomb_diagonal" class="anchor"></a><code><span>| </span><span><span class="constructor">Bomb_diagonal</span></span></code></td></tr><tr id="type-command.Easy" class="anchored"><td class="def variant constructor"><a href="#type-command.Easy" class="anchor"></a><code><span>| </span><span><span class="constructor">Easy</span></span></code></td></tr><tr id="type-command.Medium" class="anchored"><td class="def variant constructor"><a href="#type-command.Medium" class="anchor"></a><code><span>| </span><span><span class="constructor">Medium</span></span></code></td></tr><tr id="type-command.Hard" class="anchored"><td class="def variant constructor"><a href="#type-command.Hard" class="anchor"></a><code><span>| </span><span><span class="constructor">Hard</span></span></code></td></tr><tr id="type-command.End_Turn" class="anchored"><td class="def variant constructor"><a href="#type-command.End_Turn" class="anchor"></a><code><span>| </span><span><span class="constructor">End_Turn</span></span></code></td></tr><tr id="type-command.Energy" class="anchored"><td class="def variant constructor"><a href="#type-command.Energy" class="anchor"></a><code><span>| </span><span><span class="constructor">Energy</span></span></code></td></tr><tr id="type-command.Quit" class="anchored"><td class="def variant constructor"><a href="#type-command.Quit" class="anchor"></a><code><span>| </span><span><span class="constructor">Quit</span></span></code></td></tr></table></div><div class="spec-doc"><p>The type <code>command</code> represents a player command that is decomposed into a verb and possibly an object phrase.</p></div></div><div class="odoc-spec"><div class="spec exception" id="exception-Invalid_Format" class="anchored"><a href="#exception-Invalid_Format" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">Invalid_Format</span></span></code></div><div class="spec-doc"><p>Raised when a command not in the specified format is parsed.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-parse" class="anchored"><a href="#val-parse" class="anchor"></a><code><span><span class="keyword">val</span> parse : <span>string <span class="arrow">&#45;&gt;</span></span> <a href="#type-command">command</a></span></code></div><div class="spec-doc"><p><code>parse str</code> parses a player's input into a <code>command</code>, as follows. The first word (i.e., consecutive sequence of non-space characters) of <code>str</code> becomes the verb. The word must be all lower case. If the verb is followed by two integers, then the two integers form an object phrase of integer tuples, specifying a coordinate on the game board. The two integers might also be followed by two strings, the first string represents the type of the ship being placed and must be <code>&quot;carrier&quot;, &quot;destroyer&quot;, &quot;submarine&quot; or &quot;battleship&quot;</code>. The last string is a single character, and it must be either <code>&quot;v&quot;</code> if the ship's orientation is vertical, and <code>&quot;h&quot;</code> if the ship's orientation is horizontal. If the first word is followed by one integer, the word is of type row_or_col, which specifies a row or column. Examples:</p><ul><li><code>parse &quot;carrier 1 2 h&quot;</code> is <code>Ship (1,2), &quot;carrier&quot;, &quot;h&quot;)</code></li><li><code>parse &quot;battleship 1 2 h&quot;</code> is <code>Ship (1,2), &quot;battleship&quot;, &quot;h&quot;)</code></li><li><code>parse &quot;submarine 1 2 h&quot;</code> is <code>Ship (1,2), &quot;submarine&quot;, &quot;h&quot;)</code></li><li><code>parse &quot;destroyer 1 2 h&quot;</code> is <code>Ship (1,2), &quot;destroyer&quot;, &quot;h&quot;)</code></li><li><code>parse &quot;bomb 1 2&quot;</code> is <code>Bomb (1,2)</code></li><li><code>parse &quot;easy&quot;</code> is <code>Easy</code>.</li><li><code>parse &quot;quit&quot;</code> is <code>Quit</code>.</li></ul><p>Requires: <code>str</code> contains only alphanumeric (A-Z, a-z, 0-9) and space characters (only ASCII character code 32; not tabs or newlines, etc.), and must be all lowercase.</p><p>Raises: <code>Invalid_Format</code> if the command is malformed. A command is <i>invalid_format</i> if the verb is neither &quot;place ship&quot;, &quot;bomb&quot;, &quot;end turn&quot; &quot;quit&quot; or if the verb is &quot;quit&quot; or &quot;end turn&quot; and there is a non-empty object phrase, or if the verb is &quot;place ship&quot; or &quot;bomb&quot; and there is an empty object phrase or an object phrase that is not of type int.</p></div></div></div></body></html>