<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Battleship_game (Battleship.Battleship.Battleship_game)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.1.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">Battleship</a> &#x00BB; <a href="../index.html">Battleship</a> &#x00BB; Battleship_game</nav><header class="odoc-preamble"><h1>Module <code><span>Battleship.Battleship_game</span></code></h1><p>battleship_game.ml tracks the state of the game and contains functions for editing the state of the game.</p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type" id="type-g_mode" class="anchored"><a href="#type-g_mode" class="anchor"></a><code><span><span class="keyword">type</span> g_mode</span></code></div><div class="spec-doc"><p>The abstract type representing the game mode.</p></div></div><div class="odoc-spec"><div class="spec type" id="type-t" class="anchored"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span></code></div><div class="spec-doc"><p>The abstract type representing the state of the game.</p></div></div><div class="odoc-spec"><div class="spec type" id="type-ship_type" class="anchored"><a href="#type-ship_type" class="anchor"></a><code><span><span class="keyword">type</span> ship_type</span><span> = </span></code><table><tr id="type-ship_type.Carrier" class="anchored"><td class="def variant constructor"><a href="#type-ship_type.Carrier" class="anchor"></a><code><span>| </span><span><span class="constructor">Carrier</span></span></code></td></tr><tr id="type-ship_type.Battleship" class="anchored"><td class="def variant constructor"><a href="#type-ship_type.Battleship" class="anchor"></a><code><span>| </span><span><span class="constructor">Battleship</span></span></code></td></tr><tr id="type-ship_type.Submarine" class="anchored"><td class="def variant constructor"><a href="#type-ship_type.Submarine" class="anchor"></a><code><span>| </span><span><span class="constructor">Submarine</span></span></code></td></tr><tr id="type-ship_type.Destroyer" class="anchored"><td class="def variant constructor"><a href="#type-ship_type.Destroyer" class="anchor"></a><code><span>| </span><span><span class="constructor">Destroyer</span></span></code></td></tr></table></div><div class="spec-doc"><p>The type <code>ship_type</code> represents the type of a ship.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-init_state" class="anchored"><a href="#val-init_state" class="anchor"></a><code><span><span class="keyword">val</span> init_state : <span>string <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>init_state mode</code> is the initial state of the game with difficulty <code>mode</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-max_ship" class="anchored"><a href="#val-max_ship" class="anchor"></a><code><span><span class="keyword">val</span> max_ship : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p><code>max_ship state</code> is the maximum number of ships each player can place dependant on the difficulty mode in game state <code>state</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-max_bomb" class="anchored"><a href="#val-max_bomb" class="anchor"></a><code><span><span class="keyword">val</span> max_bomb : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p><code>max_bomb state</code> is the maximum number of bombs each player can place in a turn dependant on the difficulty mode in game state <code>state</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-make_grid" class="anchored"><a href="#val-make_grid" class="anchor"></a><code><span><span class="keyword">val</span> make_grid : <span>int <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span><span><a href="../Grid/index.html#type-location">Grid.location</a> array</span> array</span></span></code></div><div class="spec-doc"><p><code>make_grid rows cols</code> will initialize a location array array with <code>rows</code> arrays of length <code>cols</code> in which each location will have a ship status of NoShip and a bomb status of Safe. <code>make_grid rows cols</code> is this resulting initialized location array array.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-print_grid" class="anchored"><a href="#val-print_grid" class="anchor"></a><code><span><span class="keyword">val</span> print_grid : <span><span><span><a href="../Grid/index.html#type-location">Grid.location</a> array</span> array</span> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>print_grid player_or_opp</code> will print the string representation of a location array array. The string <code>player_or_opp</code> will determine whether or not the ship status should be printed. When <code>player_or_opp</code> is 'player' the ships will be displayed and represnted by string 'S' and in all other cases, locations with ships will be represented by string '~'.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-add_ship" class="anchored"><a href="#val-add_ship" class="anchor"></a><code><span><span class="keyword">val</span> add_ship : <span>int <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span><span><span><a href="../Grid/index.html#type-location">Grid.location</a> array</span> array</span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>add_ship row col</code> will change the status of the ship at grid location with index (<code>row</code> - 1, <code>col</code> - 1) to Ship.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-add_bomb" class="anchored"><a href="#val-add_bomb" class="anchor"></a><code><span><span class="keyword">val</span> add_bomb : <span>int <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span><span><span><a href="../Grid/index.html#type-location">Grid.location</a> array</span> array</span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>add_bomb row col</code> will change the status of the ship at grid location with index (<code>row</code> - 1, <code>col</code> - 1) to Bombed.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-add_ship_vertical" class="anchored"><a href="#val-add_ship_vertical" class="anchor"></a><code><span><span class="keyword">val</span> add_ship_vertical : 
  <span>int <span class="arrow">&#45;&gt;</span></span>
  <span>int <span class="arrow">&#45;&gt;</span></span>
  <span><span><span><a href="../Grid/index.html#type-location">Grid.location</a> array</span> array</span> <span class="arrow">&#45;&gt;</span></span>
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <span>int <span class="arrow">&#45;&gt;</span></span>
  unit</span></code></div><div class="spec-doc"><p><code>add_ship_vertical row col grid t_str num_added</code> alters the board <code>grid</code> to add a representation of a ship of ship type <code>t_str</code> which starts at the position row, col and occupies the increasing spaces of the col <code>col</code> in <code>grid</code>. The number of coordinates representing the positions the ship occupies is represented by <code>num_added</code> which is the accumulator starting at 0.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-add_ship_horizontal" class="anchored"><a href="#val-add_ship_horizontal" class="anchor"></a><code><span><span class="keyword">val</span> add_ship_horizontal : 
  <span>int <span class="arrow">&#45;&gt;</span></span>
  <span>int <span class="arrow">&#45;&gt;</span></span>
  <span><span><span><a href="../Grid/index.html#type-location">Grid.location</a> array</span> array</span> <span class="arrow">&#45;&gt;</span></span>
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <span>int <span class="arrow">&#45;&gt;</span></span>
  unit</span></code></div><div class="spec-doc"><p><code>add_ship horizontal row col grid t_str num_added</code> alters the board <code>grid</code> to add a representation of a ship of ship type <code>t_str</code> which starts at the position row, col and occupies the increasing spaces of the row <code>row</code> in <code>grid</code>. The number of coordinates representing the positions the ship occupies is represented by <code>num_added</code> which is the accumulator starting at 0.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-ship_in_bounds" class="anchored"><a href="#val-ship_in_bounds" class="anchor"></a><code><span><span class="keyword">val</span> ship_in_bounds : 
  <span>int <span class="arrow">&#45;&gt;</span></span>
  <span>int <span class="arrow">&#45;&gt;</span></span>
  <span><span><span><a href="../Grid/index.html#type-location">Grid.location</a> array</span> array</span> <span class="arrow">&#45;&gt;</span></span>
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <span>string <span class="arrow">&#45;&gt;</span></span>
  bool</span></code></div><div class="spec-doc"><p><code>ship_in_bounds row col grid t_str orientation</code> is true if the ship being placed with starting location (<code>row</code>, <code>col</code>), orienation <code>orientation</code>, and ship type <code>t_str</code> does not extend beyond the dimensions of the grid <code>grid</code> and false otherwise.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-check_win" class="anchored"><a href="#val-check_win" class="anchor"></a><code><span><span class="keyword">val</span> check_win : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>check win st player_num</code> is true if player <code>player_num</code> has sunk all of the opposite player's ships in state <code>st</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-add_ship_in_state" class="anchored"><a href="#val-add_ship_in_state" class="anchor"></a><code><span><span class="keyword">val</span> add_ship_in_state : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><span>(int * int)</span> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>add_ship_in_state st start_pos player ship_type orientation</code> is the state resulting from adding the ship represented by an int * int list, with starting position <code>start_pos</code> and orientation <code>orientation</code> to the list of player <code>player</code>'s ships in game state <code>st</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-add_bomb_in_state" class="anchored"><a href="#val-add_bomb_in_state" class="anchor"></a><code><span><span class="keyword">val</span> add_bomb_in_state : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><span><span>(int * int)</span> list</span> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>add_bomb_in_state st added_bomb player remove_energy_amt</code> is the state resulting from adding the bomb <code>added_bomb</code> which is represented by an int * int to player <code>player</code>'s list of bombs in game state <code>st</code> and subtracting the energy <code>remove_energy_amt</code> from <code>st</code>'s current energy amount.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-bomb_lst_1" class="anchored"><a href="#val-bomb_lst_1" class="anchor"></a><code><span><span class="keyword">val</span> bomb_lst_1 : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><span>(int * int)</span> list</span></span></code></div><div class="spec-doc"><p><code>bomb_lst_1 state</code> is a list of player 1's list of bombs, represented by int * ints in game state <code>state</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-bomb_lst_2" class="anchored"><a href="#val-bomb_lst_2" class="anchor"></a><code><span><span class="keyword">val</span> bomb_lst_2 : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><span>(int * int)</span> list</span></span></code></div><div class="spec-doc"><p><code>bomb_lst_2 state</code> is a list of player 2's list of bombs, represented by int * ints in game state <code>state</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-collision_detect" class="anchored"><a href="#val-collision_detect" class="anchor"></a><code><span><span class="keyword">val</span> collision_detect : <span><span><span>(int * int)</span> list</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>collision_detect ship game_st player_num</code> is true if player <code>player_num</code> is attempting to place a ship <code>ship</code> on his own board of ships in game state <code>game_st</code> where a ship already exists.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-energy" class="anchored"><a href="#val-energy" class="anchor"></a><code><span><span class="keyword">val</span> energy : <span>int <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p><code>energy player_num st</code> is the number of energy points player <code>player_num</code> currently has in the current state <code>st</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-change_energy" class="anchored"><a href="#val-change_energy" class="anchor"></a><code><span><span class="keyword">val</span> change_energy : <span>int <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>change_energy player_num st changed_amt</code> adds <code>changed_amt</code> of energy points to player <code>player_num</code>'s current energy in the current state <code>st</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-make_ship" class="anchored"><a href="#val-make_ship" class="anchor"></a><code><span><span class="keyword">val</span> make_ship : <span>string <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span><span>(int * int)</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(int * int)</span> list</span></span></code></div><div class="spec-doc"><p><code>make_ship orientation ship_type start_p</code> is a ship represented by an int * int list with the first element as the starting position <code>start_p</code>, the length determined by the ship's type <code>ship_type</code>, and the subsequent elements determined by the orienatation of the ship <code>orientation</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-get_mode" class="anchored"><a href="#val-get_mode" class="anchor"></a><code><span><span class="keyword">val</span> get_mode : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-g_mode">g_mode</a></span></code></div><div class="spec-doc"><p><code>get_mode st</code> is the game mode of state <code>st</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-get_ship_1" class="anchored"><a href="#val-get_ship_1" class="anchor"></a><code><span><span class="keyword">val</span> get_ship_1 : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><span>(int * int)</span> list</span></span></code></div><div class="spec-doc"><p><code>get_ship_1 st</code> is the list of player 1's ships in state <code>st</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-get_ship_2" class="anchored"><a href="#val-get_ship_2" class="anchor"></a><code><span><span class="keyword">val</span> get_ship_2 : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><span>(int * int)</span> list</span></span></code></div><div class="spec-doc"><p><code>get_ship_2 st</code> is the list of player 2's ships in state <code>st</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-get_ship_type" class="anchored"><a href="#val-get_ship_type" class="anchor"></a><code><span><span class="keyword">val</span> get_ship_type : <span>string <span class="arrow">&#45;&gt;</span></span> <a href="#type-ship_type">ship_type</a></span></code></div><div class="spec-doc"><p><code>get_ship_type t_str</code> is the size of ship with ship type <code>ship_str</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-ship_size" class="anchored"><a href="#val-ship_size" class="anchor"></a><code><span><span class="keyword">val</span> ship_size : <span><a href="#type-ship_type">ship_type</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p><code>ship_size s_type</code> is the number of grid spaces taken up by a ship of type <code>s_type</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-add_energy" class="anchored"><a href="#val-add_energy" class="anchor"></a><code><span><span class="keyword">val</span> add_energy : <span>int <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p><code>add_energy amt p st</code> is the state with <code>amt</code> energy added to player <code>p</code>'s total energy in state <code>st</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-add_ship_rep" class="anchored"><a href="#val-add_ship_rep" class="anchor"></a><code><span><span class="keyword">val</span> add_ship_rep : 
  <span><span><span>(int * int)</span> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(int * int)</span> <span class="arrow">&#45;&gt;</span></span>
  <span>int <span class="arrow">&#45;&gt;</span></span>
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <span>int <span class="arrow">&#45;&gt;</span></span>
  <span><span>(int * int)</span> list</span></span></code></div><div class="spec-doc"><p><code>add_ship_rep ship start_pos size o loc_added_acc</code> is the list of grid spaces taken up by a ship <code>ship</code> of size <code>size</code> and orientation <code>o</code> starting at grid space <code>start_pos</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-make_state" class="anchored"><a href="#val-make_state" class="anchor"></a><code><span><span class="keyword">val</span> make_state : 
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <span>int <span class="arrow">&#45;&gt;</span></span>
  <span>int <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(int * int)</span> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(int * int)</span> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(int * int)</span> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(int * int)</span> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span>int <span class="arrow">&#45;&gt;</span></span>
  <span>int <span class="arrow">&#45;&gt;</span></span>
  <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>make_state g_mode max_ship max_bomb ship_1 ship_2 bomb_1 bomb_2
    energy_1 energy_2</code> is the state with mode <code>g_mode</code>, maximum number of ships to place per turn <code>max_ship</code>, maximum number of bombs to place per turn <code>max_bomb</code>, player 1's ships <code>ship_1</code>, player 2's ships <code>ship_2</code>, player 1's bombs <code>bomb_1</code>, player 2's bombs <code>bomb_2</code>.</p></div></div></div></body></html>